<!DOCTYPE html>
<html>
<body>
<nav>
    <button id="toggleButton" onclick="toggleButtons()">Show 10 Buttons</button>
</nav>
<script>
document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('five_button').style.display = 'block';
    document.getElementById('ten_button').style.display = 'none';
});

function toggleButtons() {
    const fiveButtonDiv = document.getElementById('five_button');
    const tenButtonDiv = document.getElementById('ten_button');
    const toggleButton = document.getElementById('toggleButton');

    if (fiveButtonDiv.style.display === 'none') {
        fiveButtonDiv.style.display = 'block';
        tenButtonDiv.style.display = 'none';
        toggleButton.textContent = 'Show 10 Buttons';
    } else {
        fiveButtonDiv.style.display = 'none';
        tenButtonDiv.style.display = 'block';
        toggleButton.textContent = 'Show 5 Buttons';
    }
    requestState();
}
</script>
<div id="ten_button">
{% include 'ten_button.html' %}
</div>
<div id="five_button">
{% include 'five_button.html' %}
</div>
<script>
const ws = new WebSocket('ws://' + window.location.host + '/ws');
function requestState(){
    ws.send(JSON.stringify({state_request: true}));
}
ws.onmessage = function(event) {
    const data = JSON.parse(event.data);
    const indicators = document.getElementsByClassName('indicator' + data.button);
    for (let i = 0; i < indicators.length; i++) {
        indicators[i].style.backgroundColor = data.color;
    }
};
function sendButtonPress(button) {
    if (ws.readyState == WebSocket.OPEN) {
        ws.send(JSON.stringify({button: button}));
        console.log('sent button press' + button);
    }else{
        console.log('WebSocket not open');
    }
}
ws.onopen = function() {
    requestState();
};
ws.onclose = function() {
    console.log('WebSocket connection closed');
};
async function sendButtonPress(button) {
    ws.send(JSON.stringify({button: button}));
}
window.onblur = function() {
    requestState();
};
window.onfocus = function() {
    requestState();
};
</script>
</body>
</html>
